# Create Virtual Account

This method allows the merchant to create a unique virtual bank account for a specific user within Monnet. The account is local to the user‚Äôs country and can receive transfers from both banking and non-banking institutions, functioning as an interoperable deposit channel whenever supported by the sender‚Äôs financial entity.

A merchant can create only one virtual account per user. However, the same user may hold additional virtual accounts in Monnet as long as they are created through different merchants.

***

## üì§ POST Endpoint

> **üìò URL**
>
> **Endpoint:** {{base_url}}/merchant-payin-accounts/v1/accounts
>
> Please consult our Integrations team to obtain the environment-specific **base URL** required to begin your testing.

## üìù Creation Request

### üîê Header

All requests to the this endpoint must include a custom **Authorization** header to ensure secure communication and proper merchant validation.

| Header | Required | Value Format |
| :--- | :--- | :--- |
| X-Api-Key | ‚úÖ Yes | Public merchant identifier |
| X-Timestamp | ‚úÖ Yes | Unix timestamp of the request. Validated against a time window ‚â§ 2 minutes. |
| X-Signature | ‚úÖ Yes | HMAC_SHA512(secret-key, timestamp + api-key) |
| X-Account-deposit-mode | ‚úÖ Yes | OWNER: Only the owner of the Virtual Account is allowed to make deposits. <br> ANY: Any person is allowed to make the deposit. |

The **signature** value must be a **SHA-512 hash** generated by concatenating the fields as decribed.

> The ***secret-key*** is a credential provided by Monnet that must be used to build the final string before generating the hash.

### üì¶ Request Data

Specifies the structure and mandatory parameters that must be included in the request body to ensure the successful creation of a virtual account.

| Field | Description |
| :--- | :--- |
| owner.referenceId | **String (Required)** <br> Internal merchant identifier for the user. Max length 36 - Min length 1 |
| owner.type | **String (Required)** <br> Qwner category. Enum: PERSON, COMPANY. |
| owner.document.type | **String (Required)** <br> Document type. For now we only accepted CUIT in ARG, RFC in MEX and DNI - RUC in PER. |
| owner.document.number | **String (Required)** <br> Document number as a string (keep leading zeros, do not include hyphens, spaces, or periods, only digits) |
| owner.firstName | **String (Optional)** <br> Required for PERSON type. Max length 50 - Min length 1 |
| owner.lastName | **String (Optional)** <br> Required for PERSON type. Max length 50 - Min length 1 |
| owner.companyName | **String (Optional)** <br> Required for COMPANY type. Max length 80 - Min length 1 |
| owner.email | **String (Required)** <br> Contact email. Must be a valid email format. Max length 50 - Min length 1. |
| owner.phone.countryCode | **String (Required)** <br> Numeric country calling code (no +). Max length 4 - Min length 1. |
| owner.phone.number | **String (Required)** <br> National phone number (digits only). Max length 14 - Min length 1. |
| account.category | **String (Required)** <br> Business category of the account. Enum: VIRTUAL. Max length 36 - Min length 1 |
| account.type | **String (Required)** <br> Account type. Enum: CVU, CCI and CLABE <br> <br> - For now we only accepted CVU in ARG, CLABE in MEX and CCI in PER |
| account.country | **String (Required)** <br> Country code where the virtual account will exist. Use ISO 3166-1 alfa-3. |
| account.currency | **String (Required)** <br> ISO 4217 currency code. |
| account.name | **String (Required)** <br> Account label, nickname, or username used to create the account. Max length 20- Min length 3 <br> **For Mexico**, the account alias or nickname must ALWAYS consist of two words, contain only alphabetic characters (no numbers), and must not exceed 20 characters in total, including the space. For example: John Doe. |
| metadata | **Objet** <br> Collection of up to 5 key‚Äìvalue pairs that allows merchants to include custom complementary information when creating a subscription. Each element must contain the subfields key and value. <br> The metadata included in the subscription creation will be replicated in subsequent operations and webhook notifications related to that subscription. If no metadata is provided, this field must be omitted. |
| key | **String (optional)** <br> Identifier of the additional data sent within the metadata. <br> Must not exceed 20 alphanumeric characters <br> **Allowed format** <br> <br> - Letters (`a‚Äìz`, `A‚ÄìZ`), digits (`0‚Äì9`), hyphen (`-`), underscore (`_`) |
| value | **String (optional)** <br> Value associated with the corresponding key within the metadata. <br> Must not exceed 100 characters. <br> **Allowed format** <br> <br> - Allowed characters: letters, digits, spaces, and symbols: `- _ . : , / @`\n- Currency symbols allowed if needed (e.g. `S/ 150.00`, `$150.00`) |

<br />

> **üöß Recommendations by Monnet**
>
> To ensure that the account is created correctly, we suggest reading the following notes
>
> | Items | Notes |
> | :--- | :--- |
> | Proper use of the parameter `owner.referenceId` | It is recommended that merchants use this field to send the internal identifier assigned to each customer, commonly known as the merchant‚Äôs internal user ID. |
> | Proper use of the parameter `account.name` | This field represents the account‚Äôs unique label or alias. The required format depends on the selected account type: <br> <br> If type = CVU (Argentina) <br> The value must be a CVU Alias, following this pattern: <br> ^[a-zA-Z0-9._-]{6,20}$ (no spaces allowed). <br> <br> If type = CLABE (Mexico) <br> The value must be an account alias, composed of exactly two words, using alphabetic characters only (no numbers or special characters), with a maximum length of 20 characters in total, including the space. <br> Example: John Doe <br> ^[A-Za-z]{1,9} [A-Za-z]{1,10}$ |

#### Request body example

The merchant must send a JSON payload with the following structure:

```json
{
  "owner": {
    "referenceId": "COMPANY-USER-1234",
    "type": "PERSON",
    "document": {
      "type": "CUIT",
      "number": "20123456783"
    },
    "firstName": "John",
    "lastName": "Doe",
    "companyName": null,
    "email": "john.doe@test.com",
    "phone": {
      "countryCode": "54",
      "number": "989012931"
    }
  },
  "account": {
    "category": "VIRTUAL",
    "type": "CVU",
    "country": "ARG",
    "currency": "ARS",
    "name": "john.doe"
  },
  "metadata": {
    "external_ref": "EXT-123456",
    "segment": "VIP"
  }
}
```

## üìÑ Creation Response

## üì• Success Response Data

The successful creation response will include all the data you submitted in the original request. These fields may be echoed back exactly as provided or normalized (e.g., formatting adjustments, standardized casing, or validated identifiers) according to Monnet‚Äôs internal processing rules.

In addition to your submitted data, the response also includes server-generated fields required for resource identification, operation traceability, and Virtual Account lifecycle management. Merchants should persist these values and rely on them as the authoritative source for account management.

Below, we describe only the new fields added by Monnet in the response.

| Field | Description |
| :--- | :--- |
| id | **String (Required)** <br> Unique identifier assigned to the newly created Virtual Account. |
| traceId | **String (Required)** <br> Operation trace identifier used to correlate and track the request across Monnet‚Äôs systems. |
| timestamp | **String (Required)** <br> Timestamp indicating when the Virtual Account was created and processed by Monnet. (ISO-8601). |
| status | **String (Required)** <br> Current operational status of the Virtual Account (e.g., ACTIVE, INACTIVE) |
| account.number | **String (Required)** <br> Unique virtual bank account number created for the user. The account is linked to both the user and the merchant within Monnet. |
| resultUrl | **String (Opcional)** <br> URL pointing to the resource or detailed view associated with the Virtual Account |

### ‚úÖ Successful Response ‚Äì 200

```json
{
  "id": "acc_8af98b8c8a4",
  "traceId": "93963JM-38A1A",
  "timestamp": "2025-11-10T15:14:22Z",
  "status": "ACTIVE",
  "owner": {
    "referenceId": "COMPANY-USER-1234",
    "type": "PERSON",
    "document": {
      "type": "CUIT",
      "number": "20123456783"
    },
    "firstName": "John",
    "lastName": "Doe",
    "companyName": null,
    "email": "john.doe@test.com",
    "phone": {
      "countryCode": "54",
      "number": "989012931"
    }
  },
  "account": {
    "category": "VIRTUAL",
    "type": "CVU",
    "number": "200300310012",
    "name": "john.doe",
    "country": "ARG",
    "currency": "ARS"
  },
  "metadata": {
    "external_ref": "EXT-123456",
    "segment": "VIP"
  },
  "resultUrl": "https://monnet.com/virtual-accounts/id?va_7f92c9f8b1a54f0ba2c4c8d3"
}
```

## üì• Error Response Data

This response indicates that the virtual account creation request could not be processed due to a business, validation, or service error. It provides both a general error message and a detailed list of one or more specific underlying errors.

| Field | Description |
| :--- | :--- |
| error.type | **String (Required)** <br> Classifies the general type of error. <br> -> `validation_error` ‚Üí data validation issues <br> -> `authentication_error` ‚Üí invalid signature or incorrect API key <br> -> `conflict_error` ‚Üí duplicated data or inconsistent state <br> -> `provider_error` ‚Üí external provider failure <br> -> `internal_error` ‚Üí unexpected server error |
| error.summary | **String (Required)** <br> Short and clear description of the overall issue |
| details[].code | **String (Required)** <br> Technical and stable error code generated by Monnet. |
| details[].message | **String (Required)** <br> Description of the specific error |
| details[].field | **String (Required)** <br> Refers to the affected field. |
| error.timestamp | **String (Required)** <br> Timestamp indicating when the Virtual Account was created and processed by Monnet. (ISO-8601). |
| error.traceId | **String (Required)** <br> Operation trace identifier used to correlate and track the request across Monnet‚Äôs systems. |

### ‚ùå Error Response Body Detail

```json
{
  "error": {
    "type": "validation_error",
    "summary": "One or more fields failed validation",
    "details": [
      {
        "code": "ERR_MISSING_FIELD",
        "message": "Missing required field: beneficiary.email",
        "field": "beneficiary.email"
      },
      {
        "code": "ERR_INVALID_ACCOUNT_NAME",
        "message": "Invalid account.name: must match ^[a-zA-Z0-9._-]{3,15}$",
        "field": "account.name"
      }
    ],
    "timestamp": "2025-11-12T15:45:03Z",
    "traceId": "req_4f83b1f8c99"
  }
}
```

## Error Codes

Review the list of error codes at the [following link](https://payinmonnetpayments.readme.io/reference/error-codes-hidden).
